
listener "tcp" {
    address = "{{ sockaddr "GetPublicIP" }}:8200"
    tls_cert_file = "/etc/vault.d/agent.crt"
    tls_key_file = "/etc/vault.d/agent.pem"
    tls_client_ca_file = "/etc/vault.d/ca.crt"
}

seal "awskms" {
    region = "${kms_key_region}"
    kms_key_id = "${kms_key_id}"
}

storage "dynamodb" {
    ha_enabled = "true"
    region = "eu-north-1"
    table = "vault-data"
}

service_registration "consul" {
    token = "${consul_acl_token}"
    service_address = ""
}

telemetry {
  prometheus_retention_time = "30s"
  disable_hostname = true
}

api_addr = "https://vault.online.ntnu.no:8200"
cluster_addr = "https://{{ sockaddr "GetPublicIP" }}:8201"
ui = true

